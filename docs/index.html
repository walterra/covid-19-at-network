<!DOCTYPE html>
<html>
  <head>
    <title>covid 19 at network</title>
    <script
      type="text/javascript"
      src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="descriptions.js"></script>
    <style type="text/css">
      html, body {
        height: 100%;
        font: 10pt arial;
      }
      a:link, a:visited, a:hover, a:active {
        color:steelblue;
      }
      #context-overlay {
        position: absolute;
        background: #d0d0d0;
        margin: 16px;
        padding: 0px;
        width: 500px;
        display: none;
        z-index: 10000;
        border: 2px solid #666;
        border-radius: 5px;
      }
      #context-content {
        padding: 0 16px 16px 16px;
      }
      #close-button {
        background-color: transparent;
        border: none;
        color: black;
        padding: 5px;
        text-align: center;
        text-decoration: none;
        font-size: 10px;
        float: right;
      }
      #mynetwork {
        width: 100%;
        height: 100%;
        margin: 0;
        top: 0;
        bottom: 0;
        background-color: #333333;
      }
    </style>
  </head>
  <body>
    <div id="context-overlay">...</div>
    <div id="mynetwork"></div>
    <script type="text/javascript">
      const contextOverlay = document.getElementById('context-overlay');
      const closeContextOverlay = () => { contextOverlay.style.display = "none" };
      // create an array with nodes
      var rawNodes = [
        {
          id: 'fa',
          label: "Franz Allerberger",
          shape: "circularImage",
          image: "img/franz-allerberger.jpg"
        },
        {
          id: 'ms',
          label: "Martin Sprenger",
          shape: "circularImage",
          image: "img/martin-sprenger.jpg"
        },
        {
          id: 'pa',
          label: "Petra Apfalter",
          shape: "circularImage",
          image: "img/petra-apfalter.jpg"
        },
        {
          id: 'sr',
          label: "Susanne Rabady",
          shape: "circularImage",
          image: "img/susanne-rabady.jpg"
        },

        { id: 'sb', label: "Sucharit Bhakdi", shape: "circularImage", image: "img/dummy-male.jpg" },
        { id: 'fw', label: "Ferdinand Wegscheider", shape: "circularImage", image: "img/dummy-male.jpg" },
        { id: 'msNeos', label: "Mathias Strolz", shape: "circularImage", image: "img/dummy-male.jpg" },
        { id: 'cf', label: "Christian Fiala", shape: "circularImage", image: "img/dummy-male.jpg" },
        { id: 'cs', label: "Christian Schubert", shape: "circularImage", image: "img/dummy-male.jpg" },
        { id: 'mf', label: "Michael Fleischhacker", shape: "circularImage", image: "img/dummy-male.jpg" },
        { id: 'mh', label: "Martin Haditsch", shape: "circularImage", image: "img/dummy-male.jpg" },
        { id: 'as', label: "Andreas Sönnichsen", shape: "circularImage", image: "img/dummy-male.jpg" },
        { id: 'wz', label: "Wolfgang Ziegler", shape: "circularImage", image: "img/dummy-male.jpg" },
        { id: 'ra', label: "Rudi Anschober", shape: "circularImage", image: "img/rudi-anschober.jpg" },
        { id: 'hf', label: "Heinz Faßmann", shape: "circularImage", image: "img/dummy-male.jpg", size: 20},
        { id: 'ds', label: "Daniela Schmid", shape: "circularImage",
          image: "img/dummy-female.jpg"
        },
        { id: 'ah', label: "Anita Heubacher", shape: "circularImage",
          image: "img/dummy-female.jpg"
        },
        { id: 'bmr', label: "Beate Meinl-Reisinger", shape: "circularImage",
          image: "img/dummy-female.jpg"
        },

        { id: 'aekooe', label: "Ärztekammer Oberösterreich", shape: "circularImage", image: "img/icon-institution.png", size: 20},
        { id: 'BMBWF', label: "BMBWF", shape: "circularImage", image: "img/icon-institution.png", size: 20},
        { id: 'BMSGPK', label: "BMSGPK", shape: "circularImage", image: "img/icon-institution.png", size: 20},
        { id: 'AGES', label: "AGES", shape: "circularImage", image: "img/icon-institution.png", size: 20},
        { id: 'OEFOP', label: "OEFOP", shape: "circularImage", image: "img/icon-institution.png", size: 20},
        { id: 'ICI', label: "Initiative evidenzbasierte\nCorona-Information", shape: "circularImage", image: "img/icon-institution.png", size: 20},
        { id: 'ampelkomm', label: "Ampel-Kommission", shape: "circularImage", image: "img/icon-institution.png", size: 20},
        { id: 'DNEbM', label: "Netzwerk evidenzbasierte Medizin", shape: "circularImage", image: "img/icon-institution.png", size: 20},
        { id: 'TirolerAdler', label: "Tiroler Adler", shape: "circularImage", image: "img/icon-institution.png", size: 20},
        { id: 'NEOS', label: "NEOS", shape: "circularImage", image: "img/icon-institution.png", size: 20},

        { id: 'IWIMED', label: "IWIMED GmbH", shape: "circularImage", image: "img/icon-company.png", size: 20},

        { id: 'offeneschulen', label: "offeneschulen.at", shape: "circularImage", image: "img/icon-media.png", size: 20},
        { id: 'krone', label: "krone.at", shape: "circularImage", image: "img/icon-media.png", size: 20},
        { id: 'ORF', label: "ORF", shape: "circularImage", image: "img/icon-media.png", size: 20},
        { id: 'ServusTV', label: "Servus TV", shape: "circularImage", image: "img/icon-media.png", size: 20},
        { id: 'NEOSlab', label: "NEOS lab", shape: "circularImage", image: "img/icon-media.png", size: 20},
        { id: 'TT', label: "Tiroler Tageszeitung", shape: "circularImage", image: "img/icon-media.png", size: 20},
        { id: 'PunktPRERADOVIC', label: "Punkt.PRERADOVIC", shape: "circularImage", image: "img/icon-media.png", size: 20},

        { id: 'zda', label: '"Zahlen der AGES"', shape: "circularImage", image: "img/icon-quote.jpg"},
        { id: 'entd', label: '"Entdämonisierung"', shape: "circularImage", image: "img/icon-quote.jpg"}
      ];
      var nodes = new vis.DataSet(rawNodes);

      // create an array with edges
      var edges = new vis.DataSet([
      { from: 'fa', to: 'AGES', title: 'Leitung Öffentliche Gesundheit', font: { align: "middle" } },
      { from: 'ds', to: 'AGES', title: 'Öffentliche Gesundheit', font: { align: "middle" } },
      { from: 'ds', to: 'ra', title: 'PK', font: { align: "middle" } },
      { from: 'ra', to: 'BMSGPK', title: 'Minister' },

      { from: 'ds', to: 'ampelkomm', title: 'Sprecherin' },
      { from: 'fa', to: 'ampelkomm', title: 'Stellvertr. Daniela Schmid' },
      { from: 'sr', to: 'ampelkomm', title: 'Mitglied' },
      { from: 'ampelkomm', to: 'BMSGPK', title: 'berichtet an' },

      { from: 'AGES', to: 'zda' },

      { from: 'mh', to: 'ORF', title: 'Im Gespräch' },
      { from: 'fa', to: 'ORF', title: 'Frühstück bei mir' },
      { from: 'as', to: 'ORF', title: 'ZiB 2 Interview' },
      { from: 'ms', to: 'ORF', title: 'ZiB 2 Interview' },
      { from: 'ms', to: 'mf', title: '"Briefwechsel"' },
      { from: 'ms', to: 'ServusTV', title: 'Corona Quartett' },
      { from: 'ms', to: 'NEOSlab', title: 'Studiogast' },
      { from: 'ms', to: 'OEFOP', title: 'Wissenschaftlicher Koordinator' },
      { from: 'as', to: 'PunktPRERADOVIC', title: 'Youtube Interview' },

      { from: 'as', to: 'DNEbM', title: 'Vorsitzender' },
      { from: 'as', to: 'IWIMED', title: 'Beteiligung' },
      { from: 'sr', to: 'IWIMED', title: 'Beteiligung' },
      { from: 'sr', to: 'ra', title: 'PK für Kinder' },

      { from: 'mh', to: 'ICI', title: 'PK' },
      { from: 'as', to: 'ICI', title: 'PK' },
      { from: 'cf', to: 'ICI', title: 'PK' },
      { from: 'cs', to: 'ICI', title: 'PK' },

      { from: 'fa', to: 'aekooe', title: 'PK' },
      { from: 'pa', to: 'aekooe', title: 'PK' },
      { from: 'ms', to: 'aekooe', title: 'PK' },
      { from: 'aekooe', to: 'entd', title: 'propagiert' },
      { from: 'wz', to: 'entd', title: 'propagiert' },
      { from: 'entd', to: 'krone', title: 'verbreitet' },
      { from: 'wz', to: 'aekooe', title: 'Kurienobmann-Stellvertreter' },

      { from: 'pa', to: 'hf', title: 'PK' },
      { from: 'pa', to: 'ORF', title: 'ORF Report Interview' },
      { from: 'hf', to: 'BMBWF' },

      { from: 'ah', to: 'TT', title: 'Chefredakteurin' },
      { from: 'ah', to: 'TirolerAdler', title: 'Moderation Tiroler Adler Forum' },
      { from: 'fa', to: 'TT', title: 'Interview Tiroler Tageszeitung' },
      { from: 'ms', to: 'TT', title: 'Interview Tiroler Tageszeitung' },

      { from: 'msNeos', to: 'TirolerAdler', title: 'Gastredner Tiroler Adler Forum' },
      { from: 'msNeos', to: 'NEOS', title: 'ehem. Politiker' },
      { from: 'bmr', to: 'NEOS', title: 'Parteivorsitzende' },
      { from: 'zda', to: 'bmr', title: 'zitiert durch' },
      { from: 'NEOS', to: 'offeneschulen', title: 'Kampagne' },
      { from: 'NEOS', to: 'NEOSlab' },
      { from: 'zda', to: 'offeneschulen', title: 'zitiert durch' },
      { from: 'zda', to: 'pa', title: 'zitiert durch' },

      { from: 'sb', to: 'fw', title: 'Interview' },
      { from: 'fw', to: 'ServusTV', title: 'Moderator Der Wegscheider' },
      { from: 'pa', to: 'ServusTV', title: 'Gast Corona Quartett' },
      { from: 'sb', to: 'ServusTV', title: 'Gast Corona Quartett' },
      { from: 'mf', to: 'ServusTV', title: 'Moderator Corona Quartett' },
    ]);

      // create a network
      var container = document.getElementById("mynetwork");
      var data = {
        nodes: nodes,
        edges: edges,
      };
      var options = {
        physics: true,
        nodes: {
          borderWidth: 3,
          size: 25,
          color: {
            border: "#222222",
            background: "#666666",
          },
          font: { color: "#fff", size: 14 },
          shadow: true,
        },
        edges: {
          color: "#666",
          width: 2,
          length: 150,
          shadow: true,
          arrows: { middle: { enabled: true, scaleFactor: 0.3 }}
        }
      };
    var network = new vis.Network(container, data, options);

    network.on("selectNode", function (params) {
        nodeId = params.nodes[0];
        console.log("selectNode Event:", params);
        const node = rawNodes.find(rn => rn.id === nodeId);
        console.log('node', node);

        if (desc[nodeId] !== undefined) {
          contextOverlay.style.display = "block";
          contextOverlay.innerHTML = `
            <button id="close-button" onclick="closeContextOverlay()">X</button>
            <div id="context-content">
            ${marked(`# ${node.label}\n\n${desc[nodeId]}`)}
            </div>
          `;

        } else {
          contextOverlay.style.display = "none";
        }
      });
    </script>
  </body>
</html>
